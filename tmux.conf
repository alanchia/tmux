# -------------------------------
# Basic settings
# -------------------------------
setw -g mode-keys vi
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ',*:UTF-8'
set -ga terminal-overrides ',xterm-256color:Tc'
setw -g mouse on

# -------------------------------
# Window / Pane behavior
# -------------------------------
set -g base-index 1
setw -g pane-base-index 1

# Manual renames stick
setw -g automatic-rename off

# -------------------------------
# Environment updates
# -------------------------------
set-option -g update-environment "SSH_AUTH_SOCK"
set-hook -g client-attached 'refresh-client -S'

# -------------------------------
# Plugins
# -------------------------------
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'catppuccin/tmux#v2.1.3'

# CPU and RAM display settings
set -g @cpu_percentage_format "%3.0f%%"
set -g @ram_percentage_format "%3.0f%%"

# Catppuccin theme settings
set -g @catppuccin_flavor 'mocha'
set -g @catppuccin_window_status_style "rounded"

# -------------------------------
# Status line
# -------------------------------
set -g status-left-length 50
set -g status-right-length 150

# Left side (label only, actual windows styled below)
set -g status-left "#[fg=cyan,bold]Windows: #[default]"

# Right side = CPU, Memory, and SGT time
set -g status-right-length 150
set -g status-right "#[fg=green]CPU:#(top -bn1 | grep 'Cpu' | awk '{print $2}')% #[default]| "
set -ag status-right "#[fg=yellow]MEM:#(free -m | awk '/Mem:/ {printf \"%.1f%%\", $3/$2*100}') #[default]| "
set -ag status-right "#[fg=cyan]SGT: #(TZ=Asia/Singapore date +'%b %d %H:%M')#[default]"

# -------------------------------
# Selection & copy-mode highlight
# -------------------------------
# Copy mode interface (cursor + UI)
set -g mode-style "fg=black,bg=default"

# Actual selection highlight in copy mode
set -g mode-style "bg=colour227,fg=black"

# Search matches
set -g copy-mode-match-style "fg=black,bg=colour222"
set -g copy-mode-current-match-style "fg=black,bg=colour220"


# -------------------------------
# TPM init (keep at bottom)
# -------------------------------
run '~/.tmux/plugins/tpm/tpm'
run '~/.tmux/plugins/tmux/catppuccin.tmux'

# -------------------------------
# Window pills with Catppuccin styling
# -------------------------------
# Inactive windows (dim gray text inside Catppuccin pill)
set -g window-status-format "#[nobold,nounderscore,noitalics,fg=brightblack]#{E:@catppuccin_window_status_format} #I:#W "

# Active window (⭐ before pill + accent background + bold white text)
set -g window-status-current-format "⭐#[bold,nounderscore,noitalics,fg=white]#{E:@catppuccin_window_status_current_format} #I:#W "


